package main

import (
	"fmt"
	"sync"
)

type person struct {
	name string
	age  int
}

func main() {
	var pool = sync.Pool{
		New: func() any {
			fmt.Println("Creating a new Person.")
			return &person{}
		},
	}

	// Get an object from the pool
	person1 := pool.Get().(*person)
	person1.name = "John"
	person1.age = 18
	fmt.Println("Got person:", person1)

	fmt.Printf("person1 - name: %s, Age: %d\n", person1.name, person1.age)

	pool.Put(person1)
	fmt.Println("Returned person to pool")

	person2 := pool.Get().(*person)
	fmt.Println("Got person again:", person2)

	person3 := pool.Get().(*person)
	fmt.Println("Got another person:", person3)
}
